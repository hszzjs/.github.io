<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java,算法,">










<meta name="description" content="查找   1. 符号表     符号表被用来描述一张抽象的表格，里面存储着信息（值），然后按照指定的键来搜索并获取这些信息。符号表也别成为字典、索引等。主要目的就是将一个键和一个值连接起来，是一种存储键值对的数据结构，支持两种操作：插入（put）和查找（get）。符号表的API如下：">
<meta name="keywords" content="Java,算法">
<meta property="og:type" content="article">
<meta property="og:title" content="查找算法">
<meta property="og:url" content="http://yoursite.com/2019/06/16/查找算法/index.html">
<meta property="og:site_name" content="天生的努力家">
<meta property="og:description" content="查找   1. 符号表     符号表被用来描述一张抽象的表格，里面存储着信息（值），然后按照指定的键来搜索并获取这些信息。符号表也别成为字典、索引等。主要目的就是将一个键和一个值连接起来，是一种存储键值对的数据结构，支持两种操作：插入（put）和查找（get）。符号表的API如下：">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/252C2E1BEC3C4A29801ADC286E27CAD4?method=download&shareKey=2ee41c5bdfabfa0c08fa9615d667aa03">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/DD2E575D5303426AB34F948773C1EC2F?method=download&shareKey=df9ab71422fb2c36e88aec76dc2d59f6">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/7BA64422E2CA4E56BF69A9BD0194125C?method=download&shareKey=73e39d0274ed53e360e94939815c958e">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/C6842C665938412BA7E8F75B9F9E42EC?method=download&shareKey=19b797a23e66c0d7bdb068f68c402186">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/FA1354B326284018951C948BBE24EBC7?method=download&shareKey=1ece85ece1803ce60409d411d6a6b85c">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/F790C62D78FA40508ADA3BDFAB69B893?method=download&shareKey=dc33332af56040cc81747186e62bbd60">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/4148B8C7D232436E84203EFE18A9337E?method=download&shareKey=da298991cffec828fd18651ec5f4453a">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/C3CE6BEB5FB14E9DB546E650FFB20169?method=download&shareKey=787e62c06999b078617b1fa5ee05c5cc">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/95BDA879CE9D494B8F2CF336D2C0229A?method=download&shareKey=fc97b8daa8c156f07d9fd87ab2003d17">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/73769FC18C114BE49A237D2683EAA91B?method=download&shareKey=f8345cb0602a14e58542789d7fcedbf4">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/78AB69E419764E7B9359DBDD512B0757?method=download&shareKey=8137eec13bd5afc14ee150082eb9c2d5">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/D4670E01843A48F28A41036047DA23FB?method=download&shareKey=938485d22fedd80ae06bef598f700aaa">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/07D956FB0DFF450490B4899B8659013D?method=download&shareKey=ca49a94b091d7f0ca5cc42ff8f047c74">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/FBF8CF0832B14CC08FCC7ED3CC63326D?method=download&shareKey=3223706d4a9e4b62ee930a9b7ae845bf">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/014D7E3EC5BA4BB9A0C22A800463304E?method=download&shareKey=008191a310f8bd7d1d1a7478a8249eb4">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/ACAA3F25D14C446DB145027D43D34275?method=download&shareKey=1772339dedfe01cf11c3ceff45734381">
<meta property="og:updated_time" content="2019-06-16T03:52:50.364Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="查找算法">
<meta name="twitter:description" content="查找   1. 符号表     符号表被用来描述一张抽象的表格，里面存储着信息（值），然后按照指定的键来搜索并获取这些信息。符号表也别成为字典、索引等。主要目的就是将一个键和一个值连接起来，是一种存储键值对的数据结构，支持两种操作：插入（put）和查找（get）。符号表的API如下：">
<meta name="twitter:image" content="https://note.youdao.com/yws/api/personal/file/252C2E1BEC3C4A29801ADC286E27CAD4?method=download&shareKey=2ee41c5bdfabfa0c08fa9615d667aa03">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/06/16/查找算法/">





  <title>查找算法 | 天生的努力家</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://github.com/hszzjs" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	
	<header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">天生的努力家</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">只有努力才会带来幸运^_^</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/查找算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hszzjs">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://note.youdao.com/yws/api/personal/file/F2CADC6DCFAE4CDD88E92983AC901AEB?method=download&shareKey=3b76077bf529146a3dd1155847722c2a">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天生的努力家">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">查找算法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-16T11:47:40+08:00">
                2019-06-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><font size="4">  
1. 符号表   

<p>符号表被用来描述一张抽象的表格，里面存储着信息（值），然后按照指定的键来搜索并获取这些信息。符号表也别成为字典、索引等。主要目的就是将一个键和一个值连接起来，是一种存储键值对的数据结构，支持两种操作：插入（put）和查找（get）。符号表的API如下：</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    ST() <span class="comment">//创建一张符号表</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span> <span class="comment">//将键值对存入表中（若值为空就将键key从表中删除）</span></span></span><br><span class="line"><span class="function">    Value <span class="title">get</span><span class="params">(Key key)</span> <span class="comment">//获取键key对应的值（若键key不存在则返回null）</span></span></span><br><span class="line"><span class="function">    <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        put(key,<span class="keyword">null</span>);</span><br><span class="line">    &#125;<span class="comment">//从表中删去key（及其对应的值）</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> get(key)!=<span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="comment">//键key在表中是否有对应的值</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size()==<span class="number">0</span>;</span><br><span class="line">    &#125; <span class="comment">//表是否为空</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span> <span class="comment">//表中所有键的集合</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>以上所有的实现都要遵循一个规则：<br>① 每个键只对应一个值（表中不允许存在重复的键）；<br>② 当用例代码向表中存入的键值和表中已有的键（及关联的值）冲突时，新的值会替代旧的值；<br>③ 键不能为空，使用空键会产生一个运行时异常；<br>④ 不允许有空值；<br>索引表删除的实现有两种方法：==延时删除==（将键对应的值置为空，然后在某个特定时间删去所有值为空的键）和==即时删除==（立刻从表中删除指定的键）。为了方便用例处理表中的所有键值，有时需要==ST implements Interable<key>== ，这样就可以使得所有实现的索引表包含iterator()方法来返回一个实现了hasNext()和next()方法的迭代器。<br>在java中所有的对象都继承了一个equals()方法。而所有的Comparable类型的两个值a和<br>b都要保证compareTo()和equals()返回值相同。<br>A. 有序符号表<br>许多符号表的实现都利用了Comparable接口带来键的有序性来更好地实现put()和get()方法。有序符号表的API如下:</key></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    ST()</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span></span><br><span class="line"><span class="function">    Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    ...</span></span><br><span class="line"><span class="function">    Key <span class="title">min</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    Key <span class="title">mac</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    Key <span class="title">floor</span><span class="params">(Key key)</span> <span class="comment">//小于等于key的最大键</span></span></span><br><span class="line"><span class="function">    Key <span class="title">ceiling</span><span class="params">(Key key)</span> <span class="comment">//大于等于key的最小键</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span> <span class="comment">//小于key的键的数量</span></span></span><br><span class="line"><span class="function">    Key <span class="title">select</span><span class="params">(<span class="keyword">int</span> k)</span> <span class="comment">//排名为k的键</span></span></span><br><span class="line"><span class="function">    <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        delete(min());</span><br><span class="line">    &#125;<span class="comment">//删除最小的键</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        delete(max());</span><br><span class="line">    &#125; <span class="comment">//删除最大的键</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">(Key lo,Key hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hi.compareTo(lo)&lt;<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(contains(hi))</span><br><span class="line">            <span class="keyword">return</span> rank(hi)-rank(lo)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> rank(hi)-rank(lo);</span><br><span class="line">    &#125;<span class="comment">//[lo,...,hi]之间的所有键</span></span><br><span class="line">    <span class="function">Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(key lo,key hi)</span> <span class="comment">//[lo,...,hi]之间的所有键,已排序</span></span></span><br><span class="line"><span class="function">    Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys(min(),max());</span><br><span class="line">    &#125;<span class="comment">//表中所有键的集合，已排序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>B. 无序链表中的顺序查找<br>符号表中使用到的数据结构的一个简单选择就是链表，每个结点存储一个键值对。<br>编程思想：<br>get()的实现就是遍历链表，用equals()方法比较需要被查找的键和每个结点中的键，匹配成功就返回对应键的值，否则就返回null。put()也是遍历链表，使用equals()比较需要被查找的键和每个结点中的键，匹配成功就对应键的值更新为新的值，否则就要创建一个新的结点并将其插入到链表开头。这就是顺序查找。这里使用命中表示一次成功的查找，未命中表示依次失败的查找。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SequentialSearchST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node next;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key,Value value,Node next)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key=key;</span><br><span class="line">            <span class="keyword">this</span>.value=value;</span><br><span class="line">            <span class="keyword">this</span>.next=next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Node x=first;x!=<span class="keyword">null</span>;x=x.next)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key.equals(x.key))</span><br><span class="line">                <span class="keyword">return</span> x.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Node x=first;x!=<span class="keyword">null</span>;x=x.next)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key.equals(x.key))</span><br><span class="line">                x.value=value;<span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        first=<span class="keyword">new</span> Node(key,value,first);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>明显基于无序链表的顺序查找是非常低效的。<br>C. 有序数组中的二分查找<br>这里使用的数据结构是一对平行的数组，一个存储键一个存储值。<br>代码思路：<br>首先依旧是构建空的索引表，两个数组一个keys，一个values，以及记录当前索引表大小N。这个算法事实上最终要的是rank()方法，用于返回小于给定键的键的数量，而都是有序数组了，所谓小于它的数量就是对应键值对在数组中的索引。该方法就是使用了二分查找的方法，请记住返回的是数组的索引。然后在基于rank的方法上实现get()方法，get肯定要最先判断是不是空的呀，然后获取到输入键在数组中的索引，然后只要索引在数组内，并且要确保key和keys对应位置的键是相同的，然后就返回值，否则就返回空。至于put()方法肯定最先是要查找键，找到了就直接更新，找不到就得创建新的元素，怎么创建呢？因为是有序的，就得先把索引之后的元素全部后移，然后进行更新，这时候更新记得修改size。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearchST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Key[] keys;</span><br><span class="line">    <span class="keyword">private</span> Value[] values;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinarySearchST</span><span class="params">(<span class="keyword">int</span> max)</span></span>&#123;</span><br><span class="line">        keys=(Key[]) <span class="keyword">new</span> Comparable[max];</span><br><span class="line">        values=(Value[]) <span class="keyword">new</span> Object[max];</span><br><span class="line">        N=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lo=<span class="number">0</span>,hi=N-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid=(lo+hi)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(lo&gt;=hi)&#123;</span><br><span class="line">            <span class="keyword">if</span>(key.compareTo(keys[mid])&gt;<span class="number">0</span>) lo=mid+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(key.compareTo(keys[mid])&lt;<span class="number">0</span>) hi=mid-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size()==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> i=rank(key);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;N &amp;&amp; key.compareTo(keys[i]) <span class="keyword">return</span> Values[i];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i=rank(key);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;N &amp;&amp; key.compareTo(keys[i])</span><br><span class="line">            values[i]=value;<span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=N;j&gt;i;j--)&#123;</span><br><span class="line">            keys[j]=keys[j-<span class="number">1</span>];</span><br><span class="line">            values[j]=values[j--];</span><br><span class="line">        &#125;</span><br><span class="line">        values[i]=value;</span><br><span class="line">        keys[i]=key;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>D. 对二分查找的分析<br>命题1：在N个键的有序数组中进行二分查找最多需要<code>&amp;lg{N}+1&amp;</code>次比较（无论是否成功）。<br>二分查找减少了比较的次数但是无法减少运行的时间，并且在键是随机排列的情况下，构造一个基于有序数组的符号表所需要访问数组的次数是数组长度的平方级别。BinarySearchST的操作的成本如图：<br><img src="https://note.youdao.com/yws/api/personal/file/252C2E1BEC3C4A29801ADC286E27CAD4?method=download&shareKey=2ee41c5bdfabfa0c08fa9615d667aa03" alt="image"><br>然后还有简单的符号表实现的成本总结如图：<br><img src="https://note.youdao.com/yws/api/personal/file/DD2E575D5303426AB34F948773C1EC2F?method=download&shareKey=df9ab71422fb2c36e88aec76dc2d59f6" alt="image">  </p>
<ol start="2">
<li>二叉查找树<br><del>使用每个结点含有两个链接（链表中每个结点只含有一个链接）的二叉查找树来实现具有链表插入灵活性以及有序数组查找高效性的符号表。使用的数据结构由结点组成，结点包含的链接可以指向null或其他结点，二叉树中每个结点只能有一个父结点指向自己（只有一个例外根结点没有父结点），每个结点都只有左右两个链接，分别指向左子结点和右子结点。然后还有子二叉树，顾名思义不做赘述。在二叉查找树中，每个结点还包含一个键（继承Comparable）和一个值，键之间也有顺序之分。<br>~</del>二叉查找树中==每个结点的键都大于其左子树中的任意结点的键而小于右子树的任意结点的键==。<br>~~A. 基于二叉查找树的符号表  </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Key key;</span><br><span class="line">        <span class="keyword">private</span> Value value;</span><br><span class="line">        <span class="keyword">private</span> Node left,right;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key,Value value,<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.Key=key;</span><br><span class="line">            <span class="keyword">this</span>.value=value;</span><br><span class="line">            <span class="keyword">this</span>.N=N;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size(root);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Node x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> x.N;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> get(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Value <span class="title">get</span><span class="params">(Node x, Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=(x.key).compareTo(key);</span><br><span class="line">        <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>) get(x.right,key);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>) get(x.left,key);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> x.value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> put(root,key,val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x,Key key,Value val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="function">New <span class="title">Node</span><span class="params">(key,val,<span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>) x.left=put(x.left,key,val);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>) x.right=put(x.right,key,val);</span><br><span class="line">        <span class="keyword">else</span> x.value=val;</span><br><span class="line">        x.N=size(x.left)+size(x.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> min(root).key;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">min</span><span class="params">(Node x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x.left==<span class="keyword">null</span>) <span class="keyword">return</span> x;<span class="comment">//递归的终止条件</span></span><br><span class="line">        <span class="keyword">return</span> min(x.left);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">max</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="function">retun <span class="title">max</span><span class="params">(root)</span>.key</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">max</span><span class="params">(root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x.right==<span class="keyword">null</span>) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> max(x.right);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        Node t=floor(root,key);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> t.key;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">floor</span><span class="params">(Node x,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp==<span class="number">0</span>) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>) <span class="keyword">return</span> floor(x.left,key);</span><br><span class="line">        Node t=floor(x.right,key);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="keyword">null</span>) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">ceiling</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        Node t=ceiling(root,key);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> t.key;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">ceiling</span><span class="params">(Node x,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp==<span class="number">0</span>) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>) <span class="keyword">return</span> floor(x.right,key);</span><br><span class="line">        Node t=floor(x.left,key);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="keyword">null</span>) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">select</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> select(root,k).key;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">select</span><span class="params">(Node x,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> t=size(x.left);</span><br><span class="line">        <span class="keyword">if</span>(k&lt;t) <span class="keyword">return</span> select(x.left,k);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(k&gt;t) <span class="keyword">return</span> select(x.right,k-t-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rank(key,root);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key,Node x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp&lt;<span class="number">0</span>) <span class="keyword">return</span> rank(key,x.left);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>+size(x.left)+rank(key,x.right);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> size(x.left);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        root=deleteMin(root);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">deleteMin</span><span class="params">(Node x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x.left==<span class="keyword">null</span>) <span class="keyword">return</span> x.right;<span class="comment">//终止条件</span></span><br><span class="line">        x.left=deleteMin(x.left);</span><br><span class="line">        x.N=size(x.left)+size(x.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        root=deleteMax(root);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">deleteMax</span><span class="params">(Node x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x.right==<span class="keyword">null</span>) <span class="keyword">return</span> x.left;</span><br><span class="line">        x.right=deleteMax(x.right);</span><br><span class="line">        x.N=size(x.left)+size(x.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        root=delete(root,key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node x,Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp=key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmp&gt;<span class="number">0</span>) <span class="keyword">return</span> delete(x.right,key);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cmp&lt;<span class="number">0</span>) <span class="keyword">return</span> delete(x.left,key);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node t=x;</span><br><span class="line">            x=min(t.right);</span><br><span class="line">            x.left=t.left;</span><br><span class="line">            x.right=deleteMin(t.right);</span><br><span class="line">        &#125;</span><br><span class="line">        x.N=size(x.left)+size(x.right)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys(min(),max());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(Key lo,Key hi)</span></span>&#123;</span><br><span class="line">        Queue&lt;Key&gt; queue=<span class="keyword">new</span> Queue&lt;Key&gt;();</span><br><span class="line">        keys(root,queue,lo,hi);</span><br><span class="line">        <span class="keyword">return</span> queue;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">keys</span><span class="params">(Node x,Queue&lt;Key&gt; queue,Key lo,Key hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> cmplo=lo.compareTo(x.key);</span><br><span class="line">        <span class="keyword">int</span> cmphi=hi.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmplo&lt;<span class="number">0</span>) keys(x.left,queue,lo,hi);</span><br><span class="line">        <span class="keyword">if</span>(cmplo&lt;=<span class="number">0</span> &amp;&amp; cmphi&gt;=<span class="number">0</span>) queue.enqueue(x.key);</span><br><span class="line">        <span class="keyword">if</span>(cmphi&gt;<span class="number">0</span>) keys(x.right,queue,lo,hi);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码解析:<br>①NODE的构建：这里需要说明的就是二叉查找树是由结点类似于链表搭建而成，首先需要知道结点最基本的key，value，以及next，由于二叉查找树的特殊性，这里需要注意key是接待之间表现优先级的地方所以key需要继承Comparable，然后value没有特殊的就是对象值，而二叉查找树还有一点就是没有使用next而是使用left、right表示子结点并有对应的规则，然后最值得一提的是这里添加了一个属性N，表示以当前结点作为根结点的子树中的结点总数(包括自己)。可是作用呢，事实上就是计数，统计他以下的所有结点数。<br>② size()，这里的size事实上就是将整个二叉树作为整体，总体根结点的N。而且由于API统一的关系这里使用了调用的方法。<br>③ Value get(Key key):从父结点开始一遍一遍地递归直到找到所需要的。<br>④ void put(Key key,Value val):依旧由父结点开始一遍一遍地查找key的位置，找到就更新，找不到就创建新的。但是还是不一样的，主要作为插入来讲，当递归到最后x为空，创建了新结点，但是就新结点而言以上所有的父结点的N都增加了1，所以全部的x.N都需要进行更新。这里使用现有的左右子结点的N之和再加1，这里的1指的是该结点本身。<br>⑤ Key min(): 从根结点开始向左寻找。同理max()是向右寻找.<br>⑥ Key floor(Key key):向下取整。目的就是找到小于等于key的最大键（floor），而大于等于key的最小键（ceiling）。这里还要考虑如果没有呢，如果这个key本身就是根结点或者最小子结点呢？同理ceiling。<br>⑦ Key select(int k):目的是找到排名第k的键。就想一下当前结点作为根结点，当前结点的排（同时也是它的左结点的size）是在最中间，所以如果比当前结点排名大，那么就去递归到当前结点的右边子树继续查，如果比当前结点排名小，就直接递归当前结点的左边，否则那就是它了啊。<br>⑧ int rank(Key key):目的是输入键，输出它的排名。就是事实上在找的就是小于当前key的数量，也就是左结点的数量。<br>⑧ void deleteMin():删除最小键。如果当前结点没有左子结点那就是删除自己，就返回右边的结点。否则就是删除当前结点为根结点的子树的最小键。删除键就是得记得某些结点的N会变，就是当前结点的左右结点N之和再加上自己。同理deleteMax。<br>⑨ Node delete(Key key):删除键为key的结点Node，先找到键与key相等的结点x，然后记得调用deleteMin(Node)，更新每个结点的结点数就可以。<br>⑩ Iterable<key> keys()：要求可以返回给定范围内键的keys()方法。中序遍历。莫名的情况，并没有太看懂。<br>B. 简单符号表实现的成本总结：<br><img src="https://note.youdao.com/yws/api/personal/file/7BA64422E2CA4E56BF69A9BD0194125C?method=download&shareKey=73e39d0274ed53e360e94939815c958e" alt="image">  </key></p>
<ol start="3">
<li>平衡查找树<br>平衡查找树就是可以保证所有符号表操作均可以在对数时间内完成数据结构。<br>A. 2-3查找树<br>首先说明2-结点就是含有一个键和两个链接的结点，左链接指向的2-3树中的键都小于该结点，右链接指向的2-3书中的键都大于该结点，3-结点就是含有两个键和三条链接的结点。左链接执行的2-3树中的键都小于该结点，中链接指向的2-3书中的键都位于该结点的两个键之间，右链接指向的2-3书中的键都大于该结点。<br>但是这种数只是想法==还没有真正地实现==。<br>2-3查找树示意图：<br><img src="https://note.youdao.com/yws/api/personal/file/C6842C665938412BA7E8F75B9F9E42EC?method=download&shareKey=19b797a23e66c0d7bdb068f68c402186" alt="image"><br>查找：查找就是将其与根结点中的键进行比较，命中就好，如果没有命中就根据比较结果找到相应的区间，并在其指向的子树中递归查找。<br>向2-结点中插入新键：首先就是在书中进行一次未命中的查找，为了保证插入后继续保持平衡，如果未命中查找结束于2-结点，就将2-结点替换为3-结点，如果是结束于3-结点，该如何未知。<br>向一颗只含有一个3-结点的树中插入新键：示意图如图：<br><img src="https://note.youdao.com/yws/api/personal/file/FA1354B326284018951C948BBE24EBC7?method=download&shareKey=1ece85ece1803ce60409d411d6a6b85c" alt="image"><br>向一个父结点为2-结点的3-结点中插入新键：为了维持树的完美平衡，这里是先构造4-结点并将其分解，将本来的中间移动到原来的父结点中，如图：<br><img src="https://note.youdao.com/yws/api/personal/file/F790C62D78FA40508ADA3BDFAB69B893?method=download&shareKey=dc33332af56040cc81747186e62bbd60" alt="image"><br>向一个父结点为3-结点的3-结点中插入新键：和上面的一样就是将临时构造的4-结点分解，将中间放入父结点继续构造临时4-结点直到不要再分解即可。<br>分解根结点：上面一直构造分解最坏的情况就是根结点需要被分解，这不就是向一颗只有一个3-结点的书中插入新键，临时的4-结点分解为3个2-结点，树高+1.<br>局部变换：将一个4-结点分解为2-3树共有6种情况，但是需要注意每种变换都不会涉及树的其他部分。如图:<br><img src="https://note.youdao.com/yws/api/personal/file/4148B8C7D232436E84203EFE18A9337E?method=download&shareKey=da298991cffec828fd18651ec5f4453a" alt="image"><br>全局性质：局部变换都不会影响树的全局有序性和平衡性：任意空链接到根结点的路径长度都是相等的。只有根结点被分解的时候，长度才会加1.标准的二叉树是由上向下生长的，而2-3树的生长是由下向上的。<br>B. 红黑二叉查找树<br>红黑二叉查找树就是将树中的链接分为两种：红链接就是将两个2-结点连接起来构成一个3-结点，黑链接是2-3树中的普通链接。红黑二叉树就是用标准的二叉树和一些额外信息来表示2-3树，3-结点由一条左斜的红色链接相连的两个2-结点表示，如图：<br><img src="https://note.youdao.com/yws/api/personal/file/C3CE6BEB5FB14E9DB546E650FFB20169?method=download&shareKey=787e62c06999b078617b1fa5ee05c5cc" alt="image"><br>红黑树还有一种定义是含有红黑链接并满足一下条件的二叉查找树：<br>① 红链接均为左链接；<br>② 没有任何一个结点同时和两条红链接相连；<br>③ 该树是完美黑色平衡的，即任意空连接到根结点的路径上的黑链接数量相同；<br>算法思路：<br>① 结点的设置：设置静态final Boolean常量，RED=true，Black=false，Node包括KEy，Value，left，right，color，N；<br>② 旋转：由于对红黑树进行插入删除等操作的时候可能出现，红色右链接或者两条连续的红链接，都需要进行旋转修复。针对第一种情况叫做左旋转，后者情况叫做右旋转。左旋转操作示意图如下：<br><img src="https://note.youdao.com/yws/api/personal/file/95BDA879CE9D494B8F2CF336D2C0229A?method=download&shareKey=fc97b8daa8c156f07d9fd87ab2003d17" alt="image"><br>左旋转就是变换父结点以及子结点的位置，这样使得而右链接就变为了左链接。具体关系看图很容易理解的。<br>右旋转示意图如下：<br><img src="https://note.youdao.com/yws/api/personal/file/73769FC18C114BE49A237D2683EAA91B?method=download&shareKey=f8345cb0602a14e58542789d7fcedbf4" alt="image"><br>同理左旋转，仔细看示意图啊。<br>③ 向2-结点中插入新键：一棵只有一个键的红黑树只含有一个2-结点，插入键后就需要将其旋转，新键小于老键，新增一个红色结点就可以，新键大于老键，新增的红色结点就会产生一条红色的右链接，需要进行左旋转。示意图如图：<br><img src="https://note.youdao.com/yws/api/personal/file/78AB69E419764E7B9359DBDD512B0757?method=download&shareKey=8137eec13bd5afc14ee150082eb9c2d5" alt="image"><br>④ 向树底部的2-结点插入新键<br>示意图如下：<br><img src="https://note.youdao.com/yws/api/personal/file/D4670E01843A48F28A41036047DA23FB?method=download&shareKey=938485d22fedd80ae06bef598f700aaa" alt="image"><br>⑤ 向一棵双键树（即一个3-结点）中插入新键<br>这种情况分为三种子情况：新键小于树中的两个键，在两者之间，或是大于树中的两个键。处理示意图如下：<br><img src="https://note.youdao.com/yws/api/personal/file/07D956FB0DFF450490B4899B8659013D?method=download&shareKey=ca49a94b091d7f0ca5cc42ff8f047c74" alt="image"><br>⑥ 颜色转换：就是转换一个结点的两个红色子结点的颜色，不仅子结点的颜色由红变黑，父结点的颜色也需要由黑变红。仅仅设置颜色即可。<br>⑦ 根结点总是黑色：插入新的键有可能导致根结点变为红色，但是还是需要将其转换为红色，然后就是要记得根结点由红变黑时树的黑链接高度就会加1.<br>⑧ 向树底部的3-结点插入新键：可能出现指向新结点的链接可能是3-结点的右链接（只需转换颜色），或者左链接（右旋转然后转换颜色）或者右链接（左旋转下层链接然后右旋转上层链接，最后转换颜色）。<br>⑨ 将红链接在树中向上传递：示意图如图：<br><img src="https://note.youdao.com/yws/api/personal/file/FBF8CF0832B14CC08FCC7ED3CC63326D?method=download&shareKey=3223706d4a9e4b62ee930a9b7ae845bf" alt="image">  </li>
<li>散列表<br>如果所有的键都是小整数，可以通过一个数组实现无序的符号表，将键作为数组的索引而数组中的键i处储存的就是他对应的值，如此就可以快速访问任意键的值。散列表的查找算法分为两步：① 使用散列函数将被查找的键转换为数组的一个索引，不同的键可以转换为不同的索引，但是可以有可能转换到相同的索引，引起冲突，②处理这种冲突：拉链法和线性探测法。<br>散列表是算法在时间和空间上做出权衡的经典例子，可以实现一般应用中拥有（均摊后）常数级别的查找和插入操作的符号表。<br>A. 散列函数<br>目标就是将键转换为数组的索引，散列函数应该易于计算并且能够均匀分布所有的键，即对于任意键，0~M-1之间的每个整数都有相等的可能与之对应。<br>① 正整数<br>==将整数散列的最常用方法就是除留余数法==，选择大小为==素数M==的数组，对于任意正整数k，计算k除以M的玉树，使得可以有效地将键散布在0到M-1的范围内。<br>② 浮点数<br>如果键是0-1之间的实数，可以将它乘以M并四舍五入得到一个0至M-1之间的索引值，但是依旧有缺陷，修正缺陷就是==将键表示为二进制然后在使用除留余数法==。<br>③ 字符串<br>将字符串当做大整数，使用除留余数法处理。代码如下：  </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)</span><br><span class="line">    hash=(R*hash+s.charAt(i))%M;</span><br></pre></td></tr></table></figure>

<p>④ 组合键<br>如果键的类型含有多个整型变量，可以类似于处理字符串里面的每个字符，将这些整型变量混合起来处理，比如被查找的键类型为Date，那么就会有年月日三个整型变量，可以如下处理：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash=(((day*R+month)%M)*R+year)%M;</span><br></pre></td></tr></table></figure>

<p>⑤ java的约定<br>每个数据类型都需要对应的散列函数，所以Java中的所有数据类型都继承了一个能够返回一个32位整数的hashCode()方法。每一种数据类型的hashCode()方法都必须和equals()方法一致，就是如果equals返回true，那么必然hashCode的返回值必然相同，但是反之却是不一定的。<br>⑥ 将hashCode()的返回值转换为一个数组索引<br>由于需要的是数组的索引并非一个32位的整数，在实际应用中会将默认的hashCode()方法和除留余数法结合起来产生0到M-1的整数，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x.hashCode()&amp;<span class="number">0x7fffffff</span>)%M;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑦ 自定义的hashCode()方法<br>Java中的String、Integer、Double、File和URL对象的hashCode()方法可以将键平均地散布为所有可能的32位整数。但是对于自己定义的数据类型必须自己去实现这一点，这里有一个简单的做法：就是将对象中的每个变量的hashCode()返回值转化为32位整数并计算得到散列值。<br>B. 基于拉链法的散列表<br>拉链法用于碰撞处理，就是将大小为M的数组中的每个元素指向一条链表，链表中的每个结点都存储了散列值为该元素的索引的键值对。方法的基本思想就是选择足够大的M，使得所有链表都尽可能短以保证高效的查找。查找分为两步：首先根据散列值找到对应的链表，然后沿着链表顺序查找相应的键。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeparateChainingHashST</span>&lt;<span class="title">Key</span>,<span class="title">Object</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M;</span><br><span class="line">    <span class="keyword">private</span> SequentialSearchST&lt;Key,Value&gt;[] st;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparateChainingST</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">997</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SeparateChainingST</span><span class="params">(<span class="keyword">int</span> M)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.M=M;</span><br><span class="line">        st=(SeparateChainingST&lt;Key,Value&gt;[] <span class="keyword">new</span> SequentialSearchSt[M]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;M;i++)&#123;</span><br><span class="line">            st[i]=<span class="keyword">new</span> SequentialSearchST();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>(key.hashCode() &amp;ox7fffffff) %M;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Value) st[hash(key)].get(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value val)</span></span>&#123;</span><br><span class="line">        st[hash(key)].put(key,val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在基于拉链法得到散列表中，选择适当的数组大小M，既不会因为空链表而浪费大量内存，也不会因为链表太长而在查找上浪费太多时间。<br>C. 基于线性探测发的散列表<br>实现散列表的另一种方式是用大小为M的数组保存N个键值对，其中M&gt;N，依靠数组中的空位解决碰撞冲突，这种方法统称开放地址散列表，其中最简单的方法就是线性探测法：当碰撞发生时（当一个键的散列值已经被另一个不同的键占用），直接检查散列表的下一个位置（将索引值加1），然后产生三种结果：<br>1&gt; 命中，该位置的键和被查找的键相同；<br>2&gt; 未命中，键为空（该位置没有键）；<br>3&gt; 继续查找，该位置的键与被查找的键不同。<br>开放地址类的散列表的核心思想就是与其将内存用作链表，不如将它们作为在散列表的空元素，这些空元素作为查找结束的标志。实现时可以使用并行数组，一条保存键，一条保存值。代码如下：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearProbingHashST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M=<span class="number">16</span>;</span><br><span class="line">    <span class="keyword">private</span> Key[] keys;</span><br><span class="line">    <span class="keyword">private</span> Value[] values;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearProbingHashST</span><span class="params">(<span class="keyword">int</span> M)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.M=M;</span><br><span class="line">        keys=(Key[]) <span class="keyword">new</span> Object[M];</span><br><span class="line">        values=(Value[]) <span class="keyword">new</span> Object[M];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>)%M;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> cap)</span></span>&#123;</span><br><span class="line">        LinearProbingHashST t;</span><br><span class="line">        t=<span class="keyword">new</span> LinearProbingHashST(cap);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(keys[i]!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                t.put(keys[i],values[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        keys=t.keys;</span><br><span class="line">        values=t.values;</span><br><span class="line">        M=t.M;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key,Value value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;M/<span class="number">2</span>) resize(<span class="number">2</span>*M);</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i=hash(key);keys[i]!=<span class="keyword">null</span>;i=(i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(keys[i].equals(key)) values[i]=value;<span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        keys[i]=keys;</span><br><span class="line">        values[i]=value;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=hash(key);keys[i)!=<span class="keyword">null</span>;i=(i+<span class="number">1</span>)%M)&#123;</span><br><span class="line">            <span class="keyword">if</span>(keys[i].equals(key)) <span class="keyword">return</span> values[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!contains(key)) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> i=hash(key);</span><br><span class="line">        <span class="keyword">while</span>(!key.equals(keys[i]))&#123;</span><br><span class="line">            i=(i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        keys[i]=<span class="keyword">null</span>;</span><br><span class="line">        values[i]=<span class="keyword">null</span>;</span><br><span class="line">        i=(i+<span class="number">1</span>)%M;</span><br><span class="line">        <span class="keyword">while</span>(keys[i]!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            Key keyto=keys[i];</span><br><span class="line">            Value valueto=values[i];</span><br><span class="line">            keys[i]=<span class="keyword">null</span>;</span><br><span class="line">            values[i]=<span class="keyword">null</span>;</span><br><span class="line">            N--;</span><br><span class="line">            put(keyto,valueto);</span><br><span class="line">            i=(i+<span class="number">1</span>)%M;</span><br><span class="line">        &#125;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">if</span>(N&gt;<span class="number">0</span> &amp;&amp; N==M/<span class="number">8</span>) resize(M/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码解析：<br>① 首先进行参数说明，拥有N个键值对，被放入的数组大小是M（也就是线性探测表的大小），然后就是放键、值的两个数组，最开始肯定是构造函数，直接就是创建大小为M的数组喽，这里注意是要使用强制类型转换的;<br>② 建立键以及索引之间的关系，就是直接背锅吧；<br>③ 由于在不断向散列表中不断放入新的键值对，就会出现N比M的一半还要大的情况，所以需要resize散列表的大小，那就是创建新的散列表，大小为原来M的两倍，然后将旧的散列表中的键值对放入，然后更新参数就可以；<br>④ 放入新键值对，最开始肯定要先进行判断是否需要扩容，然后就是放入了，索引就是用hash的方法计算；<br>⑤ 根据键从散列表中取到对应的值；<br>⑥ 删除操作，这里就是首先根据key得到索引，然后将键值数组里面的对应位置的设置为null；然后就是将所有后面的键值对全部前移，前移规则就是一个一个取出存着设置为null，N–，在将刚刚存着的put进去，这样可以保持连续性。<br>符号表的内存使用如图：<br><img src="https://note.youdao.com/yws/api/personal/file/014D7E3EC5BA4BB9A0C22A800463304E?method=download&shareKey=008191a310f8bd7d1d1a7478a8249eb4" alt="image">  </p>
<ol start="5">
<li>应用<br>各种符号表实现的渐进性能的总结如图：<br><img src="https://note.youdao.com/yws/api/personal/file/ACAA3F25D14C446DB145027D43D34275?method=download&shareKey=1772339dedfe01cf11c3ceff45734381" alt="image"></li></ol></font>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"># Java</a>
          
            <a href="/tags/算法/" rel="tag"># 算法</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/15/垃圾处理/" rel="next" title="垃圾处理">
                <i class="fa fa-chevron-left"></i> 垃圾处理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/16/redis内部数据结构/" rel="prev" title="redis内部数据结构">
                redis内部数据结构 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://note.youdao.com/yws/api/personal/file/F2CADC6DCFAE4CDD88E92983AC901AEB?method=download&shareKey=3b76077bf529146a3dd1155847722c2a" alt="hszzjs">
            
              <p class="site-author-name" itemprop="name">hszzjs</p>
              <p class="site-description motion-element" itemprop="description">稳住，能赢。猥琐，别浪。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#查找"><span class="nav-number">1.</span> <span class="nav-text">查找</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hszzjs</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

<div class="bg_content">
  <canvas id="canvas"></canvas>
</div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  


  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!--添加动态背景-->
<script type="text/javascript" src="/js/src/dynamic_bg.js"></script>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>